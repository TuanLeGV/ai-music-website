<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Music Player - Nh·∫°c do AI S√°ng T√°c</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-in;
        }

        .header h1 {
            color: white;
            font-size: 3em;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.2em;
        }

        .player-card {
            background: rgba(255,255,255,0.95);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.8s ease-out;
        }

        .album-art {
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            position: relative;
            animation: float 3s ease-in-out infinite;
        }

        .album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .album-art::before {
            content: 'üéµ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 100px;
            opacity: 0.3;
        }

        .song-info {
            text-align: center;
            margin-bottom: 30px;
        }

        .song-title {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .song-artist {
            font-size: 1.2em;
            color: #666;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            border-radius: 10px;
            width: 0%;
            transition: width 0.1s;
            position: relative;
        }

        .progress::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #666;
            font-size: 0.9em;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(102,126,234,0.6);
        }

        .control-btn.play-btn {
            width: 80px;
            height: 80px;
            font-size: 32px;
        }

        .control-btn.small {
            width: 50px;
            height: 50px;
            font-size: 18px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .volume-icon {
            font-size: 24px;
        }

        .volume-slider {
            width: 150px;
            height: 6px;
            border-radius: 10px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
        }

        .playlist {
            max-height: 300px;
            overflow-y: auto;
            border-top: 2px solid #e0e0e0;
            padding-top: 20px;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        .playlist-item:hover {
            background: linear-gradient(90deg, rgba(102,126,234,0.1), rgba(240,147,251,0.1));
            transform: translateX(5px);
        }

        .playlist-item.active {
            background: linear-gradient(90deg, rgba(102,126,234,0.2), rgba(240,147,251,0.2));
            border-left: 4px solid #667eea;
        }

        .playlist-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .playlist-info {
            flex: 1;
        }

        .playlist-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .playlist-artist {
            color: #666;
            font-size: 0.9em;
        }

        .playlist-duration {
            color: #999;
            font-size: 0.9em;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .mode-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .mode-btn:hover {
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .album-art {
                width: 250px;
                height: 250px;
            }

            .song-title {
                font-size: 1.5em;
            }

            .player-card {
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ AI Music Player</h1>
            <p>Kh√°m ph√° nh·ªØng b·∫£n nh·∫°c ƒë·ªôc ƒë√°o do AI s√°ng t√°c</p>
        </div>

        <div class="player-card">
            <div class="album-art">
                <img id="albumArt" src="" alt="Album Art">
            </div>

            <div class="song-info">
                <div class="song-title" id="songTitle">Ch·ªçn b√†i h√°t ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
                <div class="song-artist" id="songArtist">AI Composer</div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="time-info">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <div class="controls">
                <button class="control-btn small" id="shuffleBtn" title="Shuffle">üîÄ</button>
                <button class="control-btn" id="prevBtn">‚èÆ</button>
                <button class="control-btn play-btn" id="playBtn">‚ñ∂</button>
                <button class="control-btn" id="nextBtn">‚è≠</button>
                <button class="control-btn small" id="repeatBtn" title="Repeat">üîÅ</button>
            </div>

            <div class="volume-control">
                <span class="volume-icon">üîä</span>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70">
            </div>

            <div class="playlist" id="playlist"></div>
        </div>
    </div>

    <script>
        // Danh s√°ch b√†i h√°t AI
        const songs = [
            {
                title: "Mai V√†ng ƒê√≥n L·ªôc V1",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/5-MaiVangdonloc-5.mp3",
                cover: ""
            },
            {
                title: "Mai V√†ng ƒê√≥n L·ªôc V2",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/6-MaiVangdonloc-6.mp3",
                cover: ""
            },
            {
                title: "R√°p Hoa Ch·ª£ T·∫øt V1",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/7-RapHoaChoTet-7.mp3",
                cover: ""
            },
            {
                title: "R√°p Hoa Ch·ª£ T·∫øt V2",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/8-RapHoaChoTet-8.mp3",
                cover: ""
            },
            {
                title: "R√°p Hoa ƒê√¢y Gh√© Coi V1",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/10-RapHoaDayGheCoiLien-10.mp3",
                cover: ""
            },
            {
                title: "R√°p Hoa ƒê√¢y Gh√© Coi V2",
                artist: "AI Composer",
                duration: "0:00",
                src: "https://tuanlegv.github.io/ai-music/audio/11-RapHoaDayGheCoiLien-11.mp3",
                cover: ""
            }
        ];

        let currentSongIndex = 0;
        let isPlaying = false;
        let isShuffled = false;
        let repeatMode = 0; // 0: off, 1: repeat all, 2: repeat one
        const audio = new Audio();
        audio.crossOrigin = "anonymous";

        // Kh·ªüi t·∫°o
        function init() {
            renderPlaylist();
            setupEventListeners();
            audio.volume = 0.7;
        }

        // Render playlist
        function renderPlaylist() {
            const playlistEl = document.getElementById('playlist');
            playlistEl.innerHTML = songs.map((song, index) => `
                <div class="playlist-item ${index === currentSongIndex ? 'active' : ''}" onclick="playSong(${index})">
                    <div class="playlist-number">${index + 1}</div>
                    <div class="playlist-info">
                        <div class="playlist-title">${song.title}</div>
                        <div class="playlist-artist">${song.artist}</div>
                    </div>
                    <div class="playlist-duration" id="duration-${index}">ƒêang t·∫£i...</div>
                </div>
            `).join('');
            
            // T·∫£i th·ªùi l∆∞·ª£ng cho m·ªói b√†i h√°t
            songs.forEach((song, index) => {
                if (song.src) {
                    const tempAudio = new Audio(song.src);
                    tempAudio.addEventListener('loadedmetadata', () => {
                        const durationEl = document.getElementById(`duration-${index}`);
                        if (durationEl) {
                            durationEl.textContent = formatTime(tempAudio.duration);
                        }
                    });
                }
            });
        }

        // Ph√°t b√†i h√°t
        function playSong(index) {
            currentSongIndex = index;
            const song = songs[currentSongIndex];

            // Reset audio v√† set source m·ªõi
            audio.pause();
            audio.currentTime = 0;
            audio.src = song.src;
            
            document.getElementById('songTitle').textContent = song.title;
            document.getElementById('songArtist').textContent = song.artist;
            
            const albumArt = document.getElementById('albumArt');
            if (song.cover) {
                albumArt.src = song.cover;
            } else {
                albumArt.src = '';
            }

            renderPlaylist();
            
            // ƒê·ª£i audio s·∫µn s√†ng r·ªìi m·ªõi ph√°t
            audio.load();
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    isPlaying = true;
                    updatePlayButton();
                }).catch(error => {
                    console.log('Kh√¥ng th·ªÉ ph√°t nh·∫°c:', error);
                    alert('‚ö†Ô∏è Kh√¥ng th·ªÉ ph√°t nh·∫°c!\n\nL·ªói: ' + error.message + '\n\nVui l√≤ng:\n1. Ki·ªÉm tra link nh·∫°c c√≥ ho·∫°t ƒë·ªông kh√¥ng\n2. Th·ª≠ click v√†o b√†i kh√°c\n3. Ki·ªÉm tra k·∫øt n·ªëi internet');
                    isPlaying = false;
                    updatePlayButton();
                });
            }
        }

        // Play/Pause
        function togglePlay() {
            if (!audio.src) {
                playSong(0);
                return;
            }

            if (isPlaying) {
                audio.pause();
            } else {
                audio.play();
            }
            isPlaying = !isPlaying;
            updatePlayButton();
        }

        function updatePlayButton() {
            document.getElementById('playBtn').textContent = isPlaying ? '‚è∏' : '‚ñ∂';
        }

        // Next/Previous
        function nextSong() {
            if (isShuffled) {
                currentSongIndex = Math.floor(Math.random() * songs.length);
            } else {
                currentSongIndex = (currentSongIndex + 1) % songs.length;
            }
            playSong(currentSongIndex);
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            playSong(currentSongIndex);
        }

        // Shuffle
        function toggleShuffle() {
            isShuffled = !isShuffled;
            const btn = document.getElementById('shuffleBtn');
            btn.classList.toggle('active', isShuffled);
            btn.style.background = isShuffled ? 'linear-gradient(135deg, #f093fb, #f5576c)' : '';
        }

        // Repeat
        function toggleRepeat() {
            repeatMode = (repeatMode + 1) % 3;
            const btn = document.getElementById('repeatBtn');
            const icons = ['üîÅ', 'üîÇ', 'üîÇ'];
            btn.textContent = icons[repeatMode];
            btn.classList.toggle('active', repeatMode > 0);
            btn.style.background = repeatMode > 0 ? 'linear-gradient(135deg, #f093fb, #f5576c)' : '';
        }

        // Volume
        function updateVolume(value) {
            audio.volume = value / 100;
        }

        // Progress bar
        function updateProgress() {
            const percent = (audio.currentTime / audio.duration) * 100;
            document.getElementById('progress').style.width = percent + '%';
            document.getElementById('currentTime').textContent = formatTime(audio.currentTime);
            document.getElementById('duration').textContent = formatTime(audio.duration);
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function seekTo(e) {
            const progressBar = document.getElementById('progressBar');
            const clickX = e.offsetX;
            const width = progressBar.offsetWidth;
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        }

        // Event listeners
        function setupEventListeners() {
            document.getElementById('playBtn').addEventListener('click', togglePlay);
            document.getElementById('nextBtn').addEventListener('click', nextSong);
            document.getElementById('prevBtn').addEventListener('click', prevSong);
            document.getElementById('shuffleBtn').addEventListener('click', toggleShuffle);
            document.getElementById('repeatBtn').addEventListener('click', toggleRepeat);
            document.getElementById('volumeSlider').addEventListener('input', (e) => updateVolume(e.target.value));
            document.getElementById('progressBar').addEventListener('click', seekTo);

            audio.addEventListener('timeupdate', updateProgress);
            audio.addEventListener('ended', () => {
                if (repeatMode === 2) {
                    audio.currentTime = 0;
                    audio.play();
                } else if (repeatMode === 1 || currentSongIndex < songs.length - 1) {
                    nextSong();
                } else {
                    isPlaying = false;
                    updatePlayButton();
                }
            });

            audio.addEventListener('loadedmetadata', () => {
                document.getElementById('duration').textContent = formatTime(audio.duration);
            });

            // X·ª≠ l√Ω l·ªói
            audio.addEventListener('error', (e) => {
                console.error('L·ªói khi t·∫£i nh·∫°c:', e);
                alert('‚ö†Ô∏è Kh√¥ng th·ªÉ t·∫£i file nh·∫°c!\n\nVui l√≤ng ki·ªÉm tra:\n1. Link nh·∫°c c√≥ ƒë√∫ng kh√¥ng\n2. File MP3 c√≥ t·ªìn t·∫°i tr√™n GitHub kh√¥ng\n3. K·∫øt n·ªëi internet c·ªßa b·∫°n');
                isPlaying = false;
                updatePlayButton();
            });

            // Theo d√µi tr·∫°ng th√°i c√≥ th·ªÉ ph√°t
            audio.addEventListener('canplay', () => {
                console.log('Nh·∫°c s·∫µn s√†ng ph√°t');
            });
        }

        // Kh·ªüi ch·∫°y
        init();
    </script>
</body>
</html>